\section{基于编码的PIR测试}
\subsection{实验设计}
本文实现了纠删码划分的PIR协议框架。实验的平台与具体运行方式已经在 \ref{sec:evaluation} 中给出，此处不在重复。我们使用了前文给出的单服务器亚线性PIR算法作为框架中的PIR层。我们将32GB大小的数据库分别分配给2、4、8、16台服务器，其中阈值均取服务器总数的一半，比较 (i) 直接运行单服务器PIR (ii) 进行不同划分后运行纠删码划分的PIR协议的性能。由于离线阶段仅涉及传输数据库，且分片可以在本地完成，可以使用与先前完全一致的做法，我们仅测试了在线部分的性能。我们假设一般的数据因服务器作恶或是网络故障被丢失，仅有一半的服务器回答可用。

\begin{table}[]
    \caption{不同分片数量的PIR性能比较}
    \label{tab:sharded-scheme}
    \centering
    \begin{tabular}{@{}c|cc|cccc@{}}
    \toprule
    分片数量 & \multicolumn{2}{c|}{Comm(KB)} & \multicolumn{4}{c}{Time(ms)}         \\ \midrule
         & Download      & Upload        & Query & Answer & Reconstruct & Total \\ \midrule
    单机   & 0.06          & 1152.02       & 1.17  & 3.29   & 0.00        & 4.46  \\
    8    & 0.48          & 5,120.16      & 0.52  & 1.46   & 0.00        & 1.98  \\
    32   & 1.92          & 10240.64      & 0.22  & 0.52   & 0.00        & 0.73  \\
    128  & 7.68          & 20482.56      & 0.08  & 0.15   & 0.00        & 0.23  \\ \bottomrule
    \end{tabular}
    \end{table}
\subsection{结果分析}

实验结果如表\ref{tab:sharded-scheme}所示：计算时间随着分片数量的增加而减少，而通信量则随之增加。由编码与解码带来的开销极小，不能从实验中表现出来。可以看出，在数据库规模较大时，纠删码划分的PIR协议能够进一步降低计算时间，提高性能。

\paragraph{进一步优化}
在先前的讨论中我们提到，客户端查询可以由服务器复用。在实际应用中，使用的服务器常常集中在数个数据中心内。常见的服务器运营商计费方式指出，数据中心内、数据中心间网络传输的费用远低于数据中心与用户间的传输费用。如果我们委托每个数据中心内的一台服务器对请求与回答进行转发，可以进一步降低通信的带宽。具体地，如果我们假设所有的服务器平均分布于四个数据中心内，每个数据中心有一台服务器负责向其余服务器转发客户端的查询，忽略数据中心内转发产生的通信，只考虑客户端到数据中心的通信量。在计算量不变的基础上，通信量可以优化为表\ref{tab:sharded-scheme-optimized}所示。

\begin{table}[]
    \caption{优化后不同分片数量的PIR性能比较}
    \label{tab:sharded-scheme-optimized}
    \centering
    \begin{tabular}{@{}c|cc@{}}
    \toprule
    分片数量 & \multicolumn{2}{c}{Comm(KB)} \\ \midrule
         & Download      & Upload       \\ \midrule
    单机   & 0.06          & 1152.02      \\
    8    & 0.48          & 576.02       \\
    32   & 1.92          & 288.02       \\
    128  & 7.68          & 144.02       \\ \bottomrule
    \end{tabular}
\end{table}
